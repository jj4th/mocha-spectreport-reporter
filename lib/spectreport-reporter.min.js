function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(a){i=!0,o=a}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("spectreport")):"function"==typeof define&&define.amd?define(["spectreport"],t):e.spectreportReporter=t(e.Spectreport)}(this,function(e){"use strict";function t(e,t){var r=(e.parent.title+" "+e.title).replace(/\W+/g,"_")+".png",i=t+"/"+r;return browser.takeScreenshot().then(function(e){var t=n.createOuputStream(i);t.write(new Buffer(e,"base64")),t.end()}),i}function r(e,t,r){var n=i.resolve(t),o=i.relative(n,e),s=i.resolve(r,o);return[i.dirname(s),i.basename(s)]}e="default"in e?e["default"]:e;var n=require("fs-extra"),i=require("path"),o=require("fs-extra"),s=require("mocha"),u=s.reporters.Spec,a=s.reporters.Base,c=e.Suite,f=e.Test,l={screenshotDir:"test/screenshot",outputDir:"test/results",storyDir:"test/stories"},p=function d(e,n){_classCallCheck(this,d);var i=n.reporterOptions||{},s=void 0,p=void 0,h=void 0;i.screenshotDir=i.screenshotDir||l.screenshotDir,i.outputDir=i.outputDir||l.outputDir,i.storyDir=i.storyDir||l.storyDir;var v=null;if(i.console?u.call(this,e):a.call(this,e),i.screenshot&&e.on("fail",function(e){t(e,i.screenshotDir)}),s=e.suite.file||e.suite.suites[0]&&e.suite.suites[0].file,!s)return!0;var y=r(s,i.storyDir,i.outputDir),D=_slicedToArray(y,2);p=D[0],h=D[1],e.on("suite",function(e){return""===e.title&&1===e.suites.length?!1:(v=new c(e,v),void v.start())}),e.on("suite end",function(){if(v.stop(),v.parent){var e=v.parent;e.addSuite(v),v=e}}),e.on("pending",function(e){v.addTest(new f(e,f.TEST_PENDING))}),e.on("pass",function(e){v.addTest(new f(e,f.TEST_PASS))}),e.on("fail",function(e,t){v.addTest(new f(e,f.TEST_FAIL,t))}),e.on("end",function(){if(v&&v.hasTests()){v.stop();var e=h.replace(".js",".json");o.outputJsonSync(p+"/"+e,v)}})};return p});
//# sourceMappingURL=spectreport-reporter.min.js.map
