var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("spectreport")):"function"==typeof define&&define.amd?define(["spectreport"],t):e.spectreportReporter=t(e.Spectreport)}(this,function(e){"use strict";function t(e,t){var r=(e.parent.title+" "+e.title).replace(/\W+/g,"_")+".png",o=""+t+"/"+r;return browser.takeScreenshot().then(function(e){var t=n.createOuputStream(o);t.write(new Buffer(e,"base64")),t.end()}),o}function r(e,t,r){var n=o.resolve(t),i=o.relative(n,e),s=o.resolve(r,i);return[o.dirname(s),o.basename(s)]}var n=require("fs-extra"),o=require("path"),i=require("fs-extra"),s=require("mocha"),u=s.reporters.Spec,a=s.reporters.Base,c=e.Suite,p=e.Test,f={screenshotDir:"test/screenshot",outputDir:"test/results",storyDir:"test/stories"},l=function(e){function n(e,o){_classCallCheck(this,n);var s=o.reporterOptions||{};s.screenshotDir=s.screenshotDir||f.screenshotDir,s.outputDir=s.outputDir||f.outputDir,s.storyDir=s.storyDir||f.storyDir;var a=null;s.console&&u.call(this,e),s.screenshot&&e.on("fail",function(e){t(e,s.screenshotDir)});var l=e.suite.file||e.suite.suites[0].file,d=r(l,s.storyDir,s.outputDir),h=_slicedToArray(d,2),y=h[0],v=h[1];e.on("suite",function(e){return""===e.title&&1===e.suites.length?!1:(a=new c(e,a),void a.start())}),e.on("suite end",function(){if(a.stop(),a.parent){var e=a.parent;e.addSuite(a),a=e}}),e.on("pending",function(e){a.addTest(new p(e,p.TEST_PENDING))}),e.on("pass",function(e){a.addTest(new p(e,p.TEST_PASS))}),e.on("fail",function(e,t){a.addTest(new p(e,p.TEST_FAIL,t))}),e.on("end",function(){if(a&&a.hasTests()){a.stop();var e=v.replace(".js",".json");i.outputJsonSync(y+"/"+e,a)}})}return _inherits(n,e),n}(a),d=l;return d});
//# sourceMappingURL=spectreport-reporter.min.js.map