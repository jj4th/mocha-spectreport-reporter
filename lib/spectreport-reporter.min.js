var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,s=[],n=t[Symbol.iterator]();!(r=n.next()).done&&(s.push(r.value),!e||s.length!==e););return s}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},_createClass=function(){function t(t,e){for(var r in e){var s=e[r];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.spectreportReporter=e()}(this,function(){"use strict";function t(t,e){var s=(t.parent.title+" "+t.title).replace(/\W+/g,"_")+".png",n=""+e+"/"+s;return browser.takeScreenshot().then(function(t){var e=r.createOuputStream(n);e.write(new Buffer(t,"base64")),e.end()}),n}function e(t,e,r){var n=s.resolve(e),i=s.relative(n,t),o=s.resolve(r,i);return[s.dirname(o),s.basename(o)]}var r=require("fs-extra"),s=require("path"),n=function(){function t(){var e=void 0===arguments[0]?0:arguments[0],r=void 0===arguments[1]?0:arguments[1],s=void 0===arguments[2]?0:arguments[2],n=void 0===arguments[3]?0:arguments[3];_classCallCheck(this,t),this.tests=e,this.pending=r,this.failures=s,this.duration=n,this.timeStart=null,this.timeStop=null}return _createClass(t,{add:{value:function(t){this.tests+=t.tests,this.pending+=t.pending,this.failures+=t.failures}}}),t}(),i=n,o=function y(t,e,r){var s=this;_classCallCheck(this,y),this.status=e,this.title=t.title,this.fullTitle=t.fullTitle(),this.duration=Math.round(t.duration/10)/100,this.error=null,r&&(this.error={},Object.getOwnPropertyNames(r).forEach(function(t){s.error[t]=r[t]}))};o.TEST_PENDING=2,o.TEST_PASS=1,o.TEST_FAIL=0;var a=o,u=function(){function t(e,r){_classCallCheck(this,t),this.title=e.title,this.suites=[],this.tests=[],this.parent=r,this.stats=new i}return _createClass(t,{addStats:{value:function(t){this.stats.add(t)}},addSuite:{value:function(t){return t.hasTests()?(this.suites.push(t),void this.addStats(t.stats)):!1}},addTest:{value:function(t){this.tests.push(t),this.stats.tests++,t.status===a.TEST_PENDING?this.stats.pending++:t.status===a.TEST_FAIL&&this.stats.failures++}},hasTests:{value:function(){return this.stats.tests>0}},start:{value:function(){this.stats.timeStart=Date.now()}},stop:{value:function(){return!this.stats.timeStart>0?!1:(this.stats.timeStop=Date.now(),void(this.stats.duration=Math.round((this.stats.timeStop-this.stats.timeStart)/10)/100))}},toJSON:{value:function(){var t={},e=!0,r=!1,s=void 0;try{for(var n,i=Object.keys(this)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;t[o]=this[o]}}catch(a){r=!0,s=a}finally{try{!e&&i["return"]&&i["return"]()}finally{if(r)throw s}}return t.parent=void 0,t}}}),t}(),l=u,c=require("fs-extra"),f=require("mocha"),h=f.reporters.Spec,p=f.reporters.Base,d={screenshotDir:"test/screenshot",outputDir:"test/output",storyDir:"test/stories"},v=function(r){function s(r,n){_classCallCheck(this,s);var i=n.reporterOptions||{};i.screenshotDir=i.screenshotDir||d.screenshotDir,i.outputDir=i.outputDir||d.outputDir,i.storyDir=i.storyDir||d.storyDir;var o=null;i.console&&h.call(this,r),i.screenshot&&r.on("fail",function(e){t(e,i.screenshotDir)});var u=r.suite.file||r.suite.suites[0].file,f=e(u,i.storyDir,i.outputDir),p=_slicedToArray(f,2),v=p[0],S=p[1];r.on("suite",function(t){return""===t.title&&1===t.suites.length?!1:(o=new l(t,o),void o.start())}),r.on("suite end",function(){if(o.stop(),o.parent){var t=o.parent;t.addSuite(o),o=t}}),r.on("pending",function(t){o.addTest(new a(t,a.TEST_PENDING))}),r.on("pass",function(t){o.addTest(new a(t,a.TEST_PASS))}),r.on("fail",function(t,e){o.addTest(new a(t,a.TEST_FAIL,e))}),r.on("end",function(){o.stop();var t=S.replace(".js",".json");c.outputJsonSync(v+"/"+t,o)})}return _inherits(s,r),s}(p),S=v;return S});
//# sourceMappingURL=spectreport-reporter.min.js.map