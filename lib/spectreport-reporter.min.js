function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(a){i=!0,o=a}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("spectreport")):"function"==typeof define&&define.amd?define(["spectreport"],t):e.spectreportReporter=t(e.Spectreport)}(this,function(e){"use strict";function t(e,t){var r=(e.parent.title+" "+e.title).replace(/\W+/g,"_")+".png",n=t+"/"+r;return browser.takeScreenshot().then(function(e){i.outputFile(n,new Buffer(e,"base64"))}),n}function r(e,t,r){var n=o.resolve(t),i=o.relative(n,e),s=o.resolve(r,i);return[o.dirname(s),o.basename(s)]}function n(e){var t=!0,r=!1,i=void 0;try{for(var o,s=e.suites[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var u=o.value;u.file||n(u)}}catch(a){r=!0,i=a}finally{try{!t&&s["return"]&&s["return"]()}finally{if(r)throw i}}return e.tests[0]&&e.tests[0].file?e.file=e.tests[0].file:e.suites[0]&&e.suites[0].file&&(e.file=e.suites[0].file),e}e="default"in e?e["default"]:e;var i=require("fs-extra"),o=require("path"),s=require("fs-extra"),u=require("mocha"),a=u.reporters.Spec,f=u.reporters.Base,l=e.Suite,c=e.Test,p={screenshotDir:"test/screenshots",outputDir:"test/results",storyDir:"test/stories"},d=function h(e,i){_classCallCheck(this,h);var o=i.reporterOptions||{},u=void 0,d=void 0,y=null;o.screenshotDir=o.screenshotDir||p.screenshotDir,o.outputDir=o.outputDir||p.outputDir,o.storyDir=o.storyDir||p.storyDir,o.console?this.reporter=new a(e):this.reporter=new f(e),o.screenshot&&e.on("fail",function(e){t(e,o.screenshotDir)}),e.on("suite",function(e){return""===e.title&&1===e.suites.length?!1:(e.pending&&!e.file&&n(e),y=new l(e,y),void y.start())}),e.on("suite end",function(){if(y.stop(),y.file&&(!y.parent||y.parent.file!==y.file)){var e=r(y.file,o.storyDir,o.outputDir),t=_slicedToArray(e,2);u=t[0],d=t[1];var n=d+=".json";s.outputJsonSync(u+"/"+n,y)}if(y.parent){var i=y.parent;i.addSuite(y),y=i}}),e.on("pending",function(e){y.addTest(new c(e,c.TEST_PENDING))}),e.on("pass",function(e){y.addTest(new c(e,c.TEST_PASS))}),e.on("fail",function(e,t){y.addTest(new c(e,c.TEST_FAIL,t))})};return d});
//# sourceMappingURL=spectreport-reporter.min.js.map
