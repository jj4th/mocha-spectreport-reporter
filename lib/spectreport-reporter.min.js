function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(u){o=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("spectreport")):"function"==typeof define&&define.amd?define(["spectreport"],t):e.spectreportReporter=t(e.Spectreport)}(this,function(e){"use strict";function t(e,t){var r=(e.parent.title+" "+e.title).replace(/\W+/g,"_")+".png",o=t+"/"+r;return browser.takeScreenshot().then(function(e){var t=n.createOutputStream(o);t.write(new Buffer(e,"base64")),t.end()}),o}function r(e,t,r){var n=o.resolve(t),i=o.relative(n,e),s=o.resolve(r,i);return[o.dirname(s),o.basename(s)]}e="default"in e?e["default"]:e;var n=require("fs-extra"),o=require("path"),i=require("fs-extra"),s=require("mocha"),a=s.reporters.Spec,u=s.reporters.Base,c=e.Suite,f=e.Test,l={screenshotDir:"test/screenshots",outputDir:"test/results",storyDir:"test/stories"},p=function d(e,n){_classCallCheck(this,d);var o=n.reporterOptions||{},s=void 0,p=void 0,h=null;o.screenshotDir=o.screenshotDir||l.screenshotDir,o.outputDir=o.outputDir||l.outputDir,o.storyDir=o.storyDir||l.storyDir,o.console?this.reporter=new a(e):this.reporter=new u(e),o.screenshot&&e.on("fail",function(e){t(e,o.screenshotDir)}),e.on("suite",function(e){return""===e.title&&1===e.suites.length?!1:(h=new c(e,h),void h.start())}),e.on("suite end",function(){if(h.stop(),console.log(h.file),h.file&&(!h.parent||h.parent.file!==h.file)){var e=r(h.file,o.storyDir,o.outputDir),t=_slicedToArray(e,2);s=t[0],p=t[1];var n=p.replace(".js",".json");i.outputJsonSync(s+"/"+n,h)}if(h.parent){var a=h.parent;a.addSuite(h),h=a}}),e.on("pending",function(e){h.addTest(new f(e,f.TEST_PENDING))}),e.on("pass",function(e){h.addTest(new f(e,f.TEST_PASS))}),e.on("fail",function(e,t){h.addTest(new f(e,f.TEST_FAIL,t))})};return p});
//# sourceMappingURL=spectreport-reporter.min.js.map
