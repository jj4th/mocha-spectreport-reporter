var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var s,r=[],n=t[Symbol.iterator]();!(s=n.next()).done&&(r.push(s.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function t(t,e){for(var s in e){var r=e[s];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.spectreportReporter=e()}(this,function(){"use strict";function t(t,e){var s=(t.parent.title+" "+t.title).replace(/\W+/g,"_")+".png",n=""+e+"/"+s;return browser.takeScreenshot().then(function(t){var e=r.createWriteStream(n);e.write(new Buffer(t,"base64")),e.end()}),n}function e(t,e,s){var r=s+t.split(e)[1],n=r.split("/"),i=n.pop(),a=n.join("/");return[a,i]}function s(s,r){var n=r.reporterOptions||{};n.screenshotDir=n.screenshotDir||f.screenshotDir,n.outputDir=n.outputDir||f.outputDir,n.storyDir=n.storyDir||f.storyDir;var i=null,a=s.suite.file,u=e(a,n.storyDir,n.outputDir),d=_slicedToArray(u,2),p=d[0],v=d[1];n.console&&h(s,r),n.screenshot&&s.on("fail",function(e){t(e,n.screenshotDir)}),s.on("suite",function(t){i=new c(t,i),i.start()}),s.on("suite end",function(){i.stop(),i.parent&&(i.parent.addSuite(i),i=i.parent)}),s.on("pending",function(t){i.addTest(new o(t,o.TEST_PENDING))}),s.on("pass",function(t){i.addTest(new o(t,o.TEST_PASS))}),s.on("fail",function(t,e){i.addTest(new o(t,o.TEST_FAIL,e))}),s.on("end",function(){i.stop();var t=v.replace(".js",".json"),e=l.createWriteStream(p+"/"+t);e.write(JSON.stringify(i,null,2)),e.end()})}var r=require("fs-extra"),n=function(){function t(){var e=void 0===arguments[0]?0:arguments[0],s=void 0===arguments[1]?0:arguments[1],r=void 0===arguments[2]?0:arguments[2],n=void 0===arguments[3]?0:arguments[3];_classCallCheck(this,t),this.tests=e,this.pending=s,this.failures=r,this.duration=n,this.timeStart=null,this.timeStop=null}return _createClass(t,{add:{value:function(t){this.tests+=t.tests,this.pending+=t.pending,this.failures+=t.failures}}}),t}(),i=n,a=function p(t,e,s){var r=this;_classCallCheck(this,p),this.status=e,this.title=t.title,this.fullTitle=t.fullTitle(),this.duration=Math.round(t.duration/10)/100,this.error=null,s&&(this.error={},Object.getOwnPropertyNames(s).forEach(function(t){r.error[t]=s[t]}))};a.TEST_PENDING=2,a.TEST_PASS=1,a.TEST_FAIL=0;var o=a,u=function(){function t(e,s){_classCallCheck(this,t),this.title=e.title,this.suites=[],this.tests=[],this.parent=s,this.stats=new i}return _createClass(t,{addStats:{value:function(t){this.stats.add(t)}},addSuite:{value:function(t){return t.hasTests()?(this.suites.push(t),void this.addStats(t.stats)):!1}},addTest:{value:function(t){this.tests.push(t),this.stats.tests++,t.status===o.TEST_PENDING?this.stats.pending++:t.status===o.TEST_FAIL&&this.stats.failures++}},hasTests:{value:function(){return this.tests.length>0}},start:{value:function(){this.stats.timeStart=Date.now()}},stop:{value:function(){return!this.stats.timeStart>0?!1:(this.stats.timeStop=Date.now(),void(this.stats.duration=Math.round((this.stats.timeStop-this.stats.timeStart)/10)/100))}},toJSON:{value:function(){var t=Object.assign({},this);return t.parent=void 0,t}}}),t}(),c=u,l=require("fs-extra"),h=require("mocha").reporters.Spec,f={screenshotDir:"test/screenshot",outputDir:"test/output",storyDir:"test/stories"},d=s;return d});
//# sourceMappingURL=spectreport-reporter.min.js.map